(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{29:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(21),i=n.n(c),s=(n(29),n(2)),o=n(3),u=n(5),l=n(4),d=n(14),h=n(8),j=n(6),b=n.n(j),p=n(10),O=n(7),f=n(17),m="user",v=function(e){return localStorage.setItem(m,JSON.stringify(e))},x=function(e){return function(t){setTimeout((function(){t(e)}),1500)}},k=function(){return new Promise((function(e){var t=JSON.parse(localStorage.getItem(m));null===t&&(t={}),x(t)(e)}))},g=function(e){return new Promise((function(t){v(Object(f.a)(Object(f.a)({},{name:"",email:"",image:"",description:""}),e)),x("OK")(t)}))},y=n(0),S=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.testId,n=e.disabled,a=e.text;return Object(y.jsx)("button",{disabled:n,type:"submit","data-testid":t,children:a})}}]),n}(a.Component),C=S,w=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).validade=a.validate.bind(Object(O.a)(a)),a}return Object(o.a)(n,[{key:"validate",value:function(){return this.props.name.length<3}},{key:"render",value:function(){var e=this.props,t=e.handleChange,n=e.handleSubmit,a=e.name;return Object(y.jsxs)("form",{onSubmit:n,children:[Object(y.jsx)("input",{placeholder:"Name",id:"name",name:"name",type:"text",onChange:t,value:a,"data-testid":"login-name-input"}),Object(y.jsx)(C,{testId:"login-submit-button",disabled:this.validate(),text:"Entrar"})]})}}]),n}(a.Component),I=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(y.jsx)("span",{children:"Carregando..."})}}]),n}(a.Component),N=I,P=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleChange=a.handleChange.bind(Object(O.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(O.a)(a)),a.handleRender=a.handleRender.bind(Object(O.a)(a)),a.state={name:"",loading:!1,redirect:!1},a}return Object(o.a)(n,[{key:"handleChange",value:function(e){this.setState({name:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=this.state.name;this.setState({loading:!0},Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g({name:n});case 2:t.setState({loading:!1,redirect:!0});case 3:case"end":return e.stop()}}),e)}))))}},{key:"handleRender",value:function(){var e=this.state,t=e.name;return e.loading?Object(y.jsx)(N,{}):Object(y.jsx)(w,{handleChange:this.handleChange,handleSubmit:this.handleSubmit,name:t})}},{key:"render",value:function(){var e=this.state.redirect;return Object(y.jsxs)("div",{"data-testid":"page-login",children:[this.handleRender(),e?Object(y.jsx)(h.a,{to:"/search"}):null]})}}]),n}(a.Component),F=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(y.jsx)("nav",{children:Object(y.jsxs)(d.a,{children:[Object(y.jsx)(d.c,{to:"/search","data-testid":"link-to-search",children:"Search"}),Object(y.jsx)(d.c,{to:"/favorites","data-testid":"link-to-favorites",children:"Favorites"}),Object(y.jsx)(d.c,{to:"/profile","data-testid":"link-to-profile",children:"Profile"})]})})}}]),n}(a.Component),U=F,A=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).fetchUser=a.fetchUser.bind(Object(O.a)(a)),a.state={name:"",loading:!1},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.fetchUser()}},{key:"fetchUser",value:function(){var e=this;this.setState({loading:!0},Object(p.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k();case 2:n=t.sent,e.setState({loading:!1,name:n.name});case 4:case"end":return t.stop()}}),t)}))))}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.name,a=Object(y.jsx)("h1",{"data-testid":"header-user-name",children:n});return Object(y.jsxs)("header",{"data-testid":"header-component",children:[t?Object(y.jsx)(N,{}):a,Object(y.jsx)(U,{})]})}}]),n}(a.Component),M=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).validade=a.validate.bind(Object(O.a)(a)),a}return Object(o.a)(n,[{key:"validate",value:function(){return this.props.name.length<2}},{key:"render",value:function(){var e=this.props,t=e.handleChange,n=e.handleSubmit,a=e.name;return e.loading?Object(y.jsx)(N,{}):Object(y.jsxs)("form",{onSubmit:n,children:[Object(y.jsx)("input",{placeholder:"Artist name",id:"artistName",name:"artistName",type:"text",onChange:t,value:a,"data-testid":"search-artist-input"}),Object(y.jsx)(C,{testId:"search-artist-button",disabled:this.validate(),text:"Pesquisar"})]})}}]),n}(a.Component),R=function(){var e=Object(p.a)(b.a.mark((function e(t){var n,a,r,c,i,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURI(t).replaceAll("%20","+"),a="https://itunes.apple.com/search?entity=album&term=".concat(n,"&attribute=allArtistTerm"),e.next=4,fetch(a);case 4:return r=e.sent,e.next=7,r.json();case 7:return c=e.sent,i=c.results,s=i.map((function(e){return{artistId:e.artistId,artistName:e.artistName,collectionId:e.collectionId,collectionName:e.collectionName,collectionPrice:e.collectionPrice,artworkUrl100:e.artworkUrl100,releaseDate:e.releaseDate,trackCount:e.trackCount}})),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=R,J=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props.album,t=e.artworkUrl100,n=e.collectionName,a=e.artistName,r=e.collectionId;return Object(y.jsxs)("div",{children:[Object(y.jsx)(d.c,{to:"/album/".concat(r),"data-testid":"link-to-album-".concat(r),children:Object(y.jsx)("img",{src:t,alt:""})}),Object(y.jsx)("p",{children:n}),Object(y.jsx)("p",{children:a})]})}}]),n}(a.Component),E=J,K=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.albumsFromAPI,a=t.search;if(null===n)return null;if(0===n.length&&(e=Object(y.jsx)("h3",{children:"Nenhum \xe1lbum foi encontrado"})),n.length>0){var r=n.map((function(e){return Object(y.jsx)(E,{album:e},e.collectionId)}));e=Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h3",{children:"Resultado de \xe1lbuns de: ".concat(a)}),r]})}return Object(y.jsx)("div",{children:e})}}]),n}(a.Component);K.defaultProps={albumsFromAPI:null};var T=K,q=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleChange=a.handleChange.bind(Object(O.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(O.a)(a)),a.handleRender=a.handleRender.bind(Object(O.a)(a)),a.state={name:"",loading:!1,albumsFromAPI:null,lastSearch:""},a}return Object(o.a)(n,[{key:"handleChange",value:function(e){this.setState({name:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=this.state.name;this.setState({loading:!0,lastSearch:n},Object(p.a)(b.a.mark((function e(){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(n);case 2:a=e.sent,t.setState({loading:!1,name:"",albumsFromAPI:a});case 4:case"end":return e.stop()}}),e)}))))}},{key:"handleRender",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.name,n=e.loading,a=e.albumsFromAPI,r=e.lastSearch;return Object(y.jsxs)("div",{"data-testid":"page-search",children:[Object(y.jsx)(A,{}),Object(y.jsx)(M,{handleChange:this.handleChange,handleSubmit:this.handleSubmit,name:t,loading:n}),Object(y.jsx)(T,{albumsFromAPI:a,search:r})]})}}]),n}(a.Component),B=function(){var e=Object(p.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(t,"&entity=song"));case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=B,z=n(24),G="favorite_songs";JSON.parse(localStorage.getItem(G))||localStorage.setItem(G,JSON.stringify([]));var H=function(){return JSON.parse(localStorage.getItem(G))},L=function(e){return localStorage.setItem(G,JSON.stringify(e))},Q=function(e){return function(t){setTimeout((function(){t(e)}),500)}},V=function(e){return new Promise((function(t){if(e){var n=H();L([].concat(Object(z.a)(n),[e]))}Q("OK")(t)}))},W=function(e){return new Promise((function(t){var n=H();L(n.filter((function(t){return t.trackId!==e.trackId}))),Q("OK")(t)}))},X=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleFavorite=a.handleFavorite.bind(Object(O.a)(a)),a.recoverFavoriteSongs=a.recoverFavoriteSongs.bind(Object(O.a)(a)),a.state={checked:!1,display:"inline"},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.recoverFavoriteSongs()}},{key:"handleFavorite",value:function(){var e=Object(p.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.checked,a=this.props.music,this.setState({checked:n,display:"none"}),!n){e.next=8;break}return e.next=6,V(a);case 6:e.next=10;break;case 8:return e.next=10,W(a);case 10:this.setState({display:"inline"});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"recoverFavoriteSongs",value:function(){var e=Object(p.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.music.trackId,e.next=3,new Promise((function(e){var t=H();Q(t)(e)}));case 3:n=e.sent,n.some((function(e){return t===e.trackId}))&&this.setState({checked:!0});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.music,t=e.trackName,n=e.trackId,a=e.previewUrl,r=this.state,c=r.checked,i=r.display;return void 0===t?null:Object(y.jsxs)("div",{children:[Object(y.jsx)("p",{children:t}),Object(y.jsxs)("audio",{"data-testid":"audio-component",src:a,controls:!0,children:[Object(y.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento",Object(y.jsx)("code",{children:"audio"}),"."]}),Object(y.jsxs)("label",{htmlFor:"".concat(n),"data-testid":"checkbox-music-".concat(n),children:[Object(y.jsx)("input",{type:"checkbox",id:"".concat(n),name:"checked",checked:c,onChange:this.handleFavorite,style:{display:i}}),"none"===i?Object(y.jsx)(N,{}):null]})]})}}]),n}(a.Component),Y=X,Z=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).fetchMusics=a.fetchMusics.bind(Object(O.a)(a)),a.state={musics:[],artistName:"",collectionName:"",artworkUrl100:""},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.fetchMusics(e)}},{key:"fetchMusics",value:function(){var e=Object(p.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t);case 2:n=e.sent,this.setState({musics:n,artistName:n[0].artistName,collectionName:n[0].collectionName,artworkUrl100:n[0].artworkUrl100});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.artistName,n=e.collectionName,a=e.artworkUrl100,r=e.musics;return Object(y.jsxs)("div",{"data-testid":"page-album",children:[Object(y.jsx)(A,{}),Object(y.jsxs)("div",{children:[Object(y.jsx)("img",{src:a,alt:""}),Object(y.jsx)("h2",{"data-testid":"artist-name",children:t}),Object(y.jsx)("h3",{"data-testid":"album-name",children:n}),r.slice(1).map((function(e){return Object(y.jsx)(Y,{music:e},e.trackId)}))]})]})}}]),n}(a.Component),$=Z,ee=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(y.jsx)("div",{"data-testid":"page-favorites",children:Object(y.jsx)(A,{})})}}]),n}(a.Component),te=ee,ne=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).fetchUser=a.fetchUser.bind(Object(O.a)(a)),a.state={load:!1,user:{}},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.fetchUser()}},{key:"fetchUser",value:function(){var e=Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState((function(e){return{load:!e}})),e.next=3,k();case 3:t=e.sent,this.setState((function(e){return{load:!e,user:t}}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.load,n=e.user,a=n.name,r=n.email,c=n.image,i=n.description;return t?Object(y.jsx)(N,{}):Object(y.jsxs)("div",{"data-testid":"page-profile",children:[Object(y.jsx)(A,{}),Object(y.jsx)("img",{src:c,alt:"perfil","data-testid":"profile-image"}),Object(y.jsx)("p",{children:a}),Object(y.jsx)("p",{children:r}),Object(y.jsx)("p",{children:i}),Object(y.jsx)(d.c,{to:"/profile/edit",children:"Editar perfil"})]})}}]),n}(a.Component),ae=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(y.jsx)("div",{"data-testid":"page-profile-edit",children:Object(y.jsx)(A,{})})}}]),n}(a.Component),re=ae,ce=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(y.jsx)("div",{"data-testid":"page-not-found"})}}]),n}(a.Component),ie=ce,se=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(y.jsx)("div",{children:Object(y.jsx)(d.b,{basename:"/trybe-project-trybetunes",children:Object(y.jsxs)(h.d,{children:[Object(y.jsx)(h.b,{path:"/Profile/edit",component:re}),Object(y.jsx)(h.b,{path:"/Profile",component:ne}),Object(y.jsx)(h.b,{path:"/favorites",component:te}),Object(y.jsx)(h.b,{path:"/album/:id",component:$}),Object(y.jsx)(h.b,{path:"/search",component:q}),Object(y.jsx)(h.b,{exact:!0,path:"/",component:P}),Object(y.jsx)(h.b,{path:"*",component:ie})]})})})}}]),n}(a.Component),oe=se;i.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(oe,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.b8a210f7.chunk.js.map